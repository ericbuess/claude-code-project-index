{
  "indexed_at": "2025-08-21T23:03:53.534423",
  "root": ".",
  "project_structure": {
    "type": "tree",
    "root": ".",
    "tree": [
      ".",
      "\u251c\u2500\u2500 scripts/ (9 files)",
      "\u251c\u2500\u2500 tests/ (4 files)",
      "\u2514\u2500\u2500 README.md"
    ]
  },
  "documentation_map": {
    ".claude-code-ericbuess/CONTEXT_STATE.md": {
      "sections": [
        "\ud83d\udd04 Auto-Generated Context State",
        "\ud83d\udccd Current Session",
        "\ud83d\udcdd Recently Modified Files",
        "\ud83d\udccc Context Notes"
      ],
      "architecture_hints": []
    },
    ".claude/agents/index-analyzer.md": {
      "sections": [
        "YOUR PRIMARY DIRECTIVE",
        "ENHANCED DENSE FORMAT (v3.0)",
        "ULTRATHINKING FRAMEWORK",
        "Understanding Intent",
        "Code Relationship Analysis",
        "Strategic Recommendations",
        "OUTPUT FORMAT",
        "\ud83e\udde0 Code Intelligence Analysis",
        "UNDERSTANDING YOUR REQUEST",
        "ESSENTIAL CODE PATHS"
      ],
      "architecture_hints": []
    },
    "INDEX_AWARE_MODE.md": {
      "sections": [
        "Index-Aware Mode for Claude Code",
        "Overview",
        "Quick Start",
        "How It Works",
        "System Architecture",
        "Components",
        "Features",
        "Dynamic Index Sizing",
        "Smart Caching & Regeneration",
        "Clipboard Mode (`-ic`)"
      ],
      "architecture_hints": []
    },
    "README.md": {
      "sections": [
        "Project Index for Claude Code (v0.2.0-beta)",
        "\ud83d\ude80 Quick Install",
        "\ud83d\udcd6 Usage",
        "No Manual Setup Required!",
        "Simply add -i to any prompt",
        "Using the Index",
        "Add -i flag to any prompt",
        "Reference directly in your prompt",
        "Or auto-load in every session by adding to CLAUDE.md:",
        "Add @PROJECT_INDEX.json to your CLAUDE.md file"
      ],
      "architecture_hints": []
    }
  },
  "directory_purposes": {
    "scripts": "Build and utility scripts"
  },
  "stats": {
    "total_files": 12,
    "total_directories": 4,
    "fully_parsed": {
      "python": 6,
      "shell": 1
    },
    "listed_only": {
      "json": 1,
      "shell": 4
    },
    "markdown_files": 5
  },
  "files": {
    "PROJECT_INDEX.json": {
      "language": "json",
      "parsed": false
    },
    "install.sh": {
      "language": "shell",
      "parsed": false
    },
    "scripts/detect_external_changes.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "os",
        "json",
        "pathlib",
        "datetime",
        "subprocess",
        "sys"
      ],
      "functions": {
        "get_file_mtime": {
          "doc": "Get file modification time as timestamp.",
          "signature": "(file_path)",
          "called_by": [
            "detect_external_changes"
          ]
        },
        "detect_external_changes": {
          "calls": [
            "get_file_mtime"
          ],
          "signature": "(index_path, project_root)"
        },
        "check_git_changes": "(project_root)"
      },
      "classes": {},
      "call_graph": {}
    },
    "scripts/find_python.sh": {
      "language": "shell",
      "parsed": true,
      "functions": {
        "find_python": "()"
      },
      "call_graph": {}
    },
    "scripts/index_aware_hook.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "sys",
        "os",
        "re",
        "subprocess",
        "hashlib",
        "time",
        "pathlib",
        "datetime",
        "sys",
        "vm_client_network",
        "vm_client",
        "base64",
        "pyperclip"
      ],
      "functions": {
        "find_project_root": {
          "doc": "Find project root by looking for .git or common project markers.",
          "signature": "()",
          "called_by": [
            "get_last_interactive_size",
            "main"
          ]
        },
        "get_last_interactive_size": {
          "doc": "Get the last remembered -i size from the index.",
          "calls": [
            "find_project_root"
          ],
          "signature": "()",
          "called_by": [
            "parse_index_flag"
          ]
        },
        "parse_index_flag": {
          "doc": "Parse -i or -ic flag with optional size.",
          "calls": [
            "get_last_interactive_size"
          ],
          "signature": "(prompt)",
          "called_by": [
            "main"
          ]
        },
        "calculate_files_hash": {
          "doc": "Calculate hash of non-ignored files to detect changes.",
          "signature": "(project_root)",
          "called_by": [
            "should_regenerate_index",
            "generate_index_at_size"
          ]
        },
        "should_regenerate_index": {
          "doc": "Determine if index needs regeneration.",
          "calls": [
            "calculate_files_hash"
          ],
          "signature": "(project_root, index_path, requested_size_k)",
          "called_by": [
            "main"
          ]
        },
        "generate_index_at_size": {
          "doc": "Generate index at specific token size.",
          "calls": [
            "calculate_files_hash"
          ],
          "signature": "(project_root, target_size_k, is_clipboard_mode=False)",
          "called_by": [
            "main"
          ]
        },
        "copy_to_clipboard": {
          "doc": "Copy prompt, instructions, and index to clipboard for external AI.",
          "signature": "(prompt, index_path)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "doc": "Process UserPromptSubmit hook for -i and -ic flag detection.",
          "calls": [
            "copy_to_clipboard",
            "find_project_root",
            "generate_index_at_size",
            "parse_index_flag",
            "should_regenerate_index"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "constants": {
        "DEFAULT_SIZE_K": "number",
        "MIN_SIZE_K": "number",
        "CLAUDE_MAX_K": "number",
        "EXTERNAL_MAX_K": "number"
      },
      "call_graph": {}
    },
    "scripts/index_utils.py": {
      "language": "python",
      "parsed": true,
      "purpose": "Utility functions",
      "imports": [
        "re",
        "fnmatch",
        "pathlib",
        "typing",
        "subprocess"
      ],
      "functions": {
        "extract_function_calls_python": {
          "doc": "Extract function calls from Python code body.",
          "signature": "(body: str, all_functions: Set[str]) -> List[str]",
          "called_by": [
            "extract_python_signatures"
          ]
        },
        "extract_function_calls_javascript": {
          "doc": "Extract function calls from JavaScript/TypeScript code body.",
          "signature": "(body: str, all_functions: Set[str]) -> List[str]",
          "called_by": [
            "extract_javascript_signatures"
          ]
        },
        "build_call_graph": {
          "doc": "Build bidirectional call graph from extracted functions and methods.",
          "signature": "(functions: Dict, classes: Dict) -> Tuple[Dict, Dict]"
        },
        "extract_python_signatures": {
          "doc": "Extract Python function and class signatures with full details for all files.",
          "calls": [
            "extract_function_calls_python"
          ],
          "signature": "(content: str) -> Dict[str, Dict]"
        },
        "extract_javascript_signatures": {
          "doc": "Extract JavaScript/TypeScript function and class signatures with full details.",
          "calls": [
            "extract_function_calls_javascript",
            "pos_to_line"
          ],
          "signature": "(content: str) -> Dict[str, any]"
        },
        "extract_function_calls_shell": {
          "doc": "Extract function calls from shell script body.",
          "signature": "(body: str, all_functions: Set[str]) -> List[str]",
          "called_by": [
            "extract_shell_signatures"
          ]
        },
        "extract_shell_signatures": {
          "doc": "Extract shell script function signatures and structure.",
          "calls": [
            "extract_function_calls_shell"
          ],
          "signature": "(content: str) -> Dict[str, any]"
        },
        "extract_markdown_structure": {
          "doc": "Extract headers and architectural hints from markdown files.",
          "signature": "(file_path: Path) -> Dict[str, List[str]]"
        },
        "infer_file_purpose": {
          "doc": "Infer the purpose of a file from its name and location.",
          "signature": "(file_path: Path) -> Optional[str]"
        },
        "infer_directory_purpose": {
          "doc": "Infer directory purpose from naming patterns and contents.",
          "signature": "(path: Path, files_within: List[str]) -> Optional[str]"
        },
        "get_language_name": {
          "doc": "Get readable language name from extension.",
          "signature": "(extension: str) -> str"
        },
        "parse_gitignore": {
          "doc": "Parse a .gitignore file and return list of patterns.",
          "signature": "(gitignore_path: Path) -> List[str]",
          "called_by": [
            "load_gitignore_patterns"
          ]
        },
        "load_gitignore_patterns": {
          "doc": "Load all gitignore patterns from project root and merge with defaults.",
          "calls": [
            "parse_gitignore"
          ],
          "signature": "(root_path: Path) -> Set[str]",
          "called_by": [
            "should_index_file"
          ]
        },
        "matches_gitignore_pattern": {
          "doc": "Check if a path matches any gitignore pattern.",
          "signature": "(path: Path, patterns: Set[str], root_path: Path) -> bool",
          "called_by": [
            "should_index_file"
          ]
        },
        "should_index_file": {
          "doc": "Check if we should index this file.",
          "calls": [
            "load_gitignore_patterns",
            "matches_gitignore_pattern"
          ],
          "signature": "(path: Path, root_path: Path = None) -> bool"
        },
        "get_git_files": "(root_path: Path) -> Optional[List[Path]]"
      },
      "classes": {},
      "constants": {
        "IGNORE_DIRS": "collection",
        "PARSEABLE_LANGUAGES": "collection",
        "CODE_EXTENSIONS": "collection",
        "MARKDOWN_EXTENSIONS": "collection",
        "DIRECTORY_PURPOSES": "collection"
      },
      "call_graph": {}
    },
    "scripts/project-index-helper.sh": {
      "language": "shell",
      "parsed": false,
      "purpose": "Utility functions"
    },
    "scripts/project_index.py": {
      "language": "python",
      "parsed": true,
      "functions": {
        "generate_tree_structure": {
          "doc": "Generate a compact ASCII tree representation of the directory structure.",
          "calls": [
            "add_tree_level",
            "should_include_dir"
          ],
          "signature": "(root_path: Path, max_depth: int = MAX_TREE_DEPTH) -> List[str]"
        },
        "build_index": {
          "doc": "Build the enhanced index with architectural awareness.",
          "calls": [
            "generate_tree_structure"
          ],
          "signature": "(root_dir: str) -> Tuple[Dict, int]"
        },
        "convert_to_enhanced_dense_format": {
          "doc": "Convert to enhanced dense format that preserves all AI-relevant information.",
          "calls": [
            "truncate_doc"
          ],
          "signature": "(index: Dict) -> Dict"
        },
        "compress_if_needed": {
          "doc": "Compress dense index further if it exceeds size limit.",
          "signature": "(dense_index: Dict, target_size: int = MAX_INDEX_SIZE) -> Dict"
        },
        "print_summary": {
          "doc": "Print a helpful summary of what was indexed.",
          "signature": "(index: Dict, skipped_count: int)"
        },
        "main": {
          "doc": "Run the enhanced indexer.",
          "calls": [
            "build_index",
            "compress_if_needed",
            "convert_to_enhanced_dense_format",
            "print_summary"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "updated_by_hook": true,
      "updated_at": "2025-08-21T23:05:32.688076"
    },
    "scripts/reindex_if_needed.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "sys",
        "os",
        "subprocess",
        "pathlib",
        "datetime"
      ],
      "functions": {
        "check_index_features": {
          "doc": "Check if index has all required features.",
          "signature": "(index_path)",
          "called_by": [
            "main"
          ]
        },
        "check_index_staleness": {
          "doc": "Check if index is older than threshold.",
          "signature": "(index_path, threshold_hours=24)",
          "called_by": [
            "main"
          ]
        },
        "check_missing_documentation": {
          "doc": "Check if important documentation files are missing from index.",
          "signature": "(index_path, project_root)",
          "called_by": [
            "main"
          ]
        },
        "check_structural_changes": {
          "doc": "Check if directory structure has significantly changed.",
          "signature": "(index_path, project_root)",
          "called_by": [
            "main"
          ]
        },
        "count_hook_updates": {
          "doc": "Count how many files were updated by hooks vs full index.",
          "signature": "(index_path)",
          "called_by": [
            "main"
          ]
        },
        "run_reindex": {
          "doc": "Run the project_index.py script to perform full reindex.",
          "signature": "(project_root)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "doc": "Main hook entry point.",
          "calls": [
            "check_index_features",
            "check_index_staleness",
            "check_missing_documentation",
            "check_structural_changes",
            "count_hook_updates",
            "run_reindex"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "call_graph": {}
    },
    "scripts/run_python.sh": {
      "language": "shell",
      "parsed": false
    },
    "scripts/update_index.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "sys",
        "os",
        "pathlib",
        "datetime",
        "index_utils"
      ],
      "functions": {
        "find_index_utils": {
          "doc": "Find index_utils.py in the project directory or system location.",
          "signature": "()"
        },
        "update_file_in_index": {
          "doc": "Update a single file's entry in the enhanced index.",
          "signature": "(index_path, file_path, project_root)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "doc": "Process PostToolUse hook input and update index.",
          "calls": [
            "update_file_in_index"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "call_graph": {}
    },
    "uninstall.sh": {
      "language": "shell",
      "parsed": false
    }
  },
  "dependency_graph": {
    "scripts/detect_external_changes.py": [
      "os",
      "json",
      "pathlib",
      "datetime",
      "subprocess",
      "sys"
    ],
    "scripts/index_aware_hook.py": [
      "json",
      "sys",
      "os",
      "re",
      "subprocess",
      "hashlib",
      "time",
      "pathlib",
      "datetime",
      "sys",
      "vm_client_network",
      "vm_client",
      "base64",
      "pyperclip"
    ],
    "scripts/index_utils.py": [
      "re",
      "fnmatch",
      "pathlib",
      "typing",
      "subprocess"
    ],
    "scripts/project_index.py": [
      "json",
      "os",
      "re",
      "datetime",
      "pathlib",
      "typing",
      "index_utils",
      "index_utils",
      "sys"
    ],
    "scripts/reindex_if_needed.py": [
      "json",
      "sys",
      "os",
      "subprocess",
      "pathlib",
      "datetime"
    ],
    "scripts/update_index.py": [
      "json",
      "sys",
      "os",
      "pathlib",
      "datetime",
      "index_utils"
    ]
  },
  "staleness_check": 1755230633.559774,
  "_meta": {
    "target_size_k": 50,
    "generated_at": 1755835433.564859,
    "actual_size_k": 4,
    "files_hash": "a01e4e4e5e1ab9de",
    "compression_ratio": "8.0%"
  }
}
{
  "indexed_at": "2025-08-18T14:07:02.484152",
  "root": ".",
  "project_structure": {
    "type": "tree",
    "root": ".",
    "tree": [
      ".",
      "\u251c\u2500\u2500 scripts/ (9 files)",
      "\u2514\u2500\u2500 README.md"
    ]
  },
  "documentation_map": {
    ".claude/agents/index-analyzer.md": {
      "sections": [
        "YOUR PRIMARY DIRECTIVE",
        "ULTRATHINKING FRAMEWORK",
        "Understanding Intent",
        "Code Relationship Analysis",
        "Strategic Recommendations",
        "OUTPUT FORMAT",
        "\ud83e\udde0 Code Intelligence Analysis",
        "UNDERSTANDING YOUR REQUEST",
        "ESSENTIAL CODE PATHS",
        "ARCHITECTURAL INSIGHTS"
      ],
      "architecture_hints": []
    },
    "INDEX_AWARE_MODE.md": {
      "sections": [
        "Index-Aware Mode for Claude Code",
        "Overview",
        "Quick Start",
        "How It Works",
        "System Architecture",
        "Components",
        "Features",
        "Dynamic Index Sizing",
        "Smart Caching & Regeneration",
        "Clipboard Mode (`-ic`)"
      ],
      "architecture_hints": []
    },
    "PLAN_ADAPTIVE_COMPRESSION.md": {
      "sections": [
        "Adaptive Compression Strategy for PROJECT_INDEX",
        "Overview",
        "Current Issues",
        "Final Design: Single Dynamic Index",
        "Core Concept",
        "Purpose",
        "Flag Syntax",
        "Standard mode (for Claude)",
        "Clipboard mode (for external AI)",
        "Size Limits"
      ],
      "architecture_hints": []
    },
    "README.md": {
      "sections": [
        "Project Index for Claude Code (v0.1.0)",
        "\ud83d\ude80 Quick Install",
        "\ud83d\udcd6 Usage",
        "Create an Index for Your Project",
        "Using the Index",
        "Ask architectural questions",
        "Or auto-load in every session by adding to CLAUDE.md:",
        "Add @PROJECT_INDEX.json to your CLAUDE.md file",
        "\ud83d\ude80 Advanced: Index-Aware Mode with -i Flag",
        "Default 50k token index with intelligent analysis"
      ],
      "architecture_hints": []
    }
  },
  "directory_purposes": {
    "scripts": "Build and utility scripts"
  },
  "stats": {
    "total_files": 13,
    "total_directories": 3,
    "fully_parsed": {
      "python": 6,
      "shell": 1
    },
    "listed_only": {
      "json": 1,
      "shell": 5
    },
    "markdown_files": 4
  },
  "files": {
    "scripts/detect_external_changes.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "os",
        "json",
        "pathlib",
        "datetime",
        "subprocess",
        "sys"
      ],
      "functions": {
        "get_file_mtime": {
          "signature": "(file_path)",
          "called_by": [
            "detect_external_changes"
          ]
        },
        "detect_external_changes": {
          "calls": [
            "get_file_mtime"
          ],
          "signature": "(index_path, project_root)"
        },
        "check_git_changes": "(project_root)"
      },
      "classes": {},
      "call_graph": {}
    },
    "scripts/find_python.sh": {
      "language": "shell",
      "parsed": true,
      "functions": {
        "find_python": "()"
      },
      "call_graph": {}
    },
    "scripts/index_aware_hook.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "sys",
        "os",
        "re",
        "subprocess",
        "hashlib",
        "time",
        "pathlib",
        "datetime",
        "base64",
        "pyperclip"
      ],
      "functions": {
        "find_project_root": {
          "signature": "()",
          "called_by": [
            "main"
          ]
        },
        "parse_index_flag": {
          "signature": "(prompt)",
          "called_by": [
            "main"
          ]
        },
        "calculate_files_hash": {
          "signature": "(project_root)",
          "called_by": [
            "should_regenerate_index",
            "generate_index_at_size"
          ]
        },
        "should_regenerate_index": {
          "calls": [
            "calculate_files_hash"
          ],
          "signature": "(project_root, index_path, requested_size_k)",
          "called_by": [
            "main"
          ]
        },
        "generate_index_at_size": {
          "calls": [
            "calculate_files_hash"
          ],
          "signature": "(project_root, target_size_k)",
          "called_by": [
            "main"
          ]
        },
        "copy_to_clipboard": {
          "signature": "(prompt, index_path)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "calls": [
            "copy_to_clipboard",
            "find_project_root",
            "generate_index_at_size",
            "parse_index_flag",
            "should_regenerate_index"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "constants": {
        "DEFAULT_SIZE_K": "number",
        "MIN_SIZE_K": "number",
        "CLAUDE_MAX_K": "number",
        "EXTERNAL_MAX_K": "number"
      },
      "call_graph": {}
    },
    "scripts/index_utils.py": {
      "language": "python",
      "parsed": true,
      "purpose": "Utility functions",
      "imports": [
        "re",
        "fnmatch",
        "pathlib",
        "typing",
        "subprocess"
      ],
      "functions": {
        "extract_function_calls_python": {
          "signature": "(body: str, all_functions: Set[str]) -> List[str]",
          "called_by": [
            "extract_python_signatures"
          ]
        },
        "extract_function_calls_javascript": {
          "signature": "(body: str, all_functions: Set[str]) -> List[str]",
          "called_by": [
            "extract_javascript_signatures"
          ]
        },
        "build_call_graph": {
          "signature": "(functions: Dict, classes: Dict) -> Tuple[Dict, Dict]"
        },
        "extract_python_signatures": {
          "calls": [
            "extract_function_calls_python"
          ],
          "signature": "(content: str) -> Dict[str, Dict]"
        },
        "extract_javascript_signatures": {
          "calls": [
            "extract_function_calls_javascript"
          ],
          "signature": "(content: str) -> Dict[str, any]"
        },
        "extract_function_calls_shell": {
          "signature": "(body: str, all_functions: Set[str]) -> List[str]",
          "called_by": [
            "extract_shell_signatures"
          ]
        },
        "extract_shell_signatures": {
          "calls": [
            "extract_function_calls_shell"
          ],
          "signature": "(content: str) -> Dict[str, any]"
        },
        "extract_markdown_structure": {
          "signature": "(file_path: Path) -> Dict[str, List[str]]"
        },
        "infer_file_purpose": {
          "signature": "(file_path: Path) -> Optional[str]"
        },
        "infer_directory_purpose": {
          "signature": "(path: Path, files_within: List[str]) -> Optional[str]"
        },
        "get_language_name": {
          "signature": "(extension: str) -> str"
        },
        "parse_gitignore": {
          "signature": "(gitignore_path: Path) -> List[str]",
          "called_by": [
            "load_gitignore_patterns"
          ]
        },
        "load_gitignore_patterns": {
          "calls": [
            "parse_gitignore"
          ],
          "signature": "(root_path: Path) -> Set[str]",
          "called_by": [
            "should_index_file"
          ]
        },
        "matches_gitignore_pattern": {
          "signature": "(path: Path, patterns: Set[str], root_path: Path) -> bool",
          "called_by": [
            "should_index_file"
          ]
        },
        "should_index_file": {
          "calls": [
            "load_gitignore_patterns",
            "matches_gitignore_pattern"
          ],
          "signature": "(path: Path, root_path: Path = None) -> bool"
        },
        "get_git_files": "(root_path: Path) -> Optional[List[Path]]"
      },
      "classes": {},
      "constants": {
        "IGNORE_DIRS": "collection",
        "PARSEABLE_LANGUAGES": "collection",
        "CODE_EXTENSIONS": "collection",
        "MARKDOWN_EXTENSIONS": "collection",
        "DIRECTORY_PURPOSES": "collection"
      },
      "call_graph": {}
    },
    "scripts/project_index.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "os",
        "re",
        "datetime",
        "pathlib",
        "typing",
        "index_utils",
        "index_utils",
        "sys"
      ],
      "functions": {
        "generate_tree_structure": {
          "calls": [
            "add_tree_level",
            "should_include_dir"
          ],
          "signature": "(root_path: Path, max_depth: int = MAX_TREE_DEPTH) -> List[str]",
          "called_by": [
            "build_index"
          ]
        },
        "build_index": {
          "calls": [
            "generate_tree_structure"
          ],
          "signature": "(root_dir: str) -> Tuple[Dict, int]",
          "called_by": [
            "main"
          ]
        },
        "compress_index_if_needed": {
          "signature": "(index: Dict, target_size: int = MAX_INDEX_SIZE) -> Dict",
          "called_by": [
            "main"
          ]
        },
        "print_summary": {
          "signature": "(index: Dict, skipped_count: int)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "calls": [
            "build_index",
            "compress_index_if_needed",
            "print_summary"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "constants": {
        "MAX_FILES": "number",
        "MAX_INDEX_SIZE": "value",
        "MAX_TREE_DEPTH": "number"
      },
      "call_graph": {}
    },
    "scripts/reindex_if_needed.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "sys",
        "os",
        "subprocess",
        "pathlib",
        "datetime"
      ],
      "functions": {
        "check_index_features": {
          "signature": "(index_path)",
          "called_by": [
            "main"
          ]
        },
        "check_index_staleness": {
          "signature": "(index_path, threshold_hours=24)",
          "called_by": [
            "main"
          ]
        },
        "check_missing_documentation": {
          "signature": "(index_path, project_root)",
          "called_by": [
            "main"
          ]
        },
        "check_structural_changes": {
          "signature": "(index_path, project_root)",
          "called_by": [
            "main"
          ]
        },
        "count_hook_updates": {
          "signature": "(index_path)",
          "called_by": [
            "main"
          ]
        },
        "run_reindex": {
          "signature": "(project_root)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "calls": [
            "check_index_features",
            "check_index_staleness",
            "check_missing_documentation",
            "check_structural_changes",
            "count_hook_updates",
            "run_reindex"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "call_graph": {}
    },
    "scripts/update_index.py": {
      "language": "python",
      "parsed": true,
      "imports": [
        "json",
        "sys",
        "os",
        "pathlib",
        "datetime",
        "index_utils"
      ],
      "functions": {
        "find_index_utils": {
          "signature": "()"
        },
        "update_file_in_index": {
          "signature": "(index_path, file_path, project_root)",
          "called_by": [
            "main"
          ]
        },
        "main": {
          "calls": [
            "update_file_in_index"
          ],
          "signature": "()"
        }
      },
      "classes": {},
      "call_graph": {}
    }
  },
  "dependency_graph": {
    "scripts/detect_external_changes.py": [
      "os",
      "json",
      "pathlib",
      "datetime",
      "subprocess",
      "sys"
    ],
    "scripts/index_aware_hook.py": [
      "json",
      "sys",
      "os",
      "re",
      "subprocess",
      "hashlib",
      "time",
      "pathlib",
      "datetime",
      "base64",
      "pyperclip"
    ],
    "scripts/index_utils.py": [
      "re",
      "fnmatch",
      "pathlib",
      "typing",
      "subprocess"
    ],
    "scripts/project_index.py": [
      "json",
      "os",
      "re",
      "datetime",
      "pathlib",
      "typing",
      "index_utils",
      "index_utils",
      "sys"
    ],
    "scripts/reindex_if_needed.py": [
      "json",
      "sys",
      "os",
      "subprocess",
      "pathlib",
      "datetime"
    ],
    "scripts/update_index.py": [
      "json",
      "sys",
      "os",
      "pathlib",
      "datetime",
      "index_utils"
    ]
  },
  "staleness_check": 1754939222.507733,
  "_meta": {
    "target_size_k": 1,
    "generated_at": 1755544022.513608,
    "actual_size_k": 3,
    "files_hash": "15ba5cd4d9bb3962",
    "compression_ratio": "300.0%"
  }
}